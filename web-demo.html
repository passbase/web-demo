<!DOCTYPE html>
<html>
  <head>
    <script
      type="text/javascript"
      src="https://unpkg.com/@passbase/button@v3/button.js"
    ></script>
    <link rel="stylesheet" href="index.css" />
    <title>Verify your Identity</title>
  </head>

  <body>
    <img
      class="img-fluid passbase"
      src="https://passbase.com/assets/images/logo.png"
      alt="Passbase"
    />

    <div class="container">
      <p class="title">Verify your identity now</p>
      <p class="subtitle">
        You can verify your identity in this Demo by clicking the verification
        button below
      </p>

      <!-- 1. This is the Passbase Component -->
      <div id="passbase-button"></div>
    </div>

    <script type="text/javascript">
      // This is the logic for the passbase component
      const element = document.getElementById("passbase-button");
      const apiKey =
        "YOUR_API_KEY";
      const onFinished = (error, authKey, additionalAttributes) => {
        //  Do what you want after the flow finished
        if (error) {
          console.log(error);
        } else {
          // Optional - Example to send auth key to your backend
          // sendAuthKeyToBackend(authKey);
        }
      };

      // Optional - Example to send auth key to your backend
      const sendAuthKeyToBackend = (authKey) => {
        const body = {
          authKey: authKey,
        };
        const requestOptions = {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(body),
        };
        fetch("YOUR_BACKEND_POST_ENDPOINT", requestOptions)
          .then(() => {
            console.log("Success");
          })
          .catch((error) => {
            console.log(error);
          });
      };

      // Example with a customer_user_id
      Passbase.renderButton(element, onFinished, apiKey, {
        additionalAttributes: {
          customer_user_id: "SOME_USER_ID",
        },
      });
    </script>
  </body>
</html>
